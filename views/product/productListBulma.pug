extends ../layout/layout_vue_bulma

block title
  title Zunka - Produtos

block css
  //- link(rel="stylesheet" href="/css/product/productListBulma.css" charset="utf-8")
  link(rel="stylesheet" href="/css/bulma.min.css" charset="utf-8")
  link(rel="stylesheet" href="/fontawesome/css/all.min.css" charset="utf-8")
  link(rel="stylesheet" href="/css/product/bannerMenu.css" charset="utf-8")

block content
  section
    //- .container.is-widescreen
    .container.is-fullhd
      figure.image
        a(v-for="(banner, index) in banners", :index='index' v-show='index == visibleBanner', :href="banner.link || false")
          img.banner(:src="'/banner/' + banner.fileName")
        .banner-menu
          .arrow.left(@click='changeBanner(-1)') &#10094;
          .dots
            .dot(v-for="(banner, index) in banners", :index='index' @click='selectBanner(index)', :class='[index == visibleBanner ? "selected" : ""]')
          .arrow.right(@click='changeBanner(1)') &#10095;
  .cart(v-if='this.productAddedToCart._id')
    .item
      img(:src='"/img/" + this.productAddedToCart._id + "/" + this.productAddedToCart.images[0]')
      span Adicionado ao carrinho
    .sub-total
      span Subtotal ({{ cart.totalQtd }} {{cart.totalQtd > 1 ? "itens" : "item"}}) :
      span {{ cart.totalPrice | currency }}
    .buttons
      button(onclick='window.location="/cart"') Carrinho
      button(onclick='window.location="/checkout/shipping-address"') Finailzar compra ({{ cart.totalQtd }} {{cart.totalQtd > 1 ? "itens" : "item"}})
  //- New products.
  section.section
    .container
      h3.subtitle.is-3 Novidades na loja
      .row.columns
        .column(v-for='product in newProducts')
          a(:href='"/product/" + product._id')
            .card(style="height:400px;")
              .card-image
                figure.image(style="padding:1em;")
                    img(:src='srcImg0200(product)', v-if='product.images[0]' alt="Imagem não disponível")
              .card-content
                .content.is-medium
                  p.has-text-link {{ product.storeProductTitle }}
                  p.has-text-grey-dark R$ {{ product.storeProductPrice | currency}}        
  //- Best selling products.
  section.section
    .container
      h3.subtitle.is-3 Produtos mais vendidos
      .row.columns
        .column(v-for='product in bestSellingProducts')
          a(:href='"/product/" + product._id')
            .card(style="height:400px;")
              .card-image
                figure.image(style="padding:1em;")
                  img(:src='srcImg0200(product)', v-if='product.images[0]' alt="Imagem não disponível")
              .card-content
                .content.is.medium
                  p.has-text-link {{ product.storeProductTitle }}
                  p.has-text-grey-dark  R$ {{ product.storeProductPrice | currency}} 
  //- All products.
  section.section
    .container
      h3.subtitle.is-3: a(href='/all') Todos os produtos >
append internal_scripts
  script.
    let cart = !{JSON.stringify(cart)};
    let search = !{JSON.stringify(search)};
    let banners = !{JSON.stringify(banners)};

append external_scripts
  script(src='/js/product/productList.js?0001')
