extends ../layout/layout_vue_n

block title
  title Zunka - Produto

block append css
  link(rel="stylesheet" href="/css/product/product.css?0002" charset="utf-8")

block content
    section
        .layout.shadow
            .product-thumbnail
                img(v-for='image, index in product.images', :src='srcImg0080(product, index)' @click='selectedThumbnail=index')
            .product-image(@click='showZoomImg')
                img(:src='srcImg0300(product, selectedThumbnail)' v-if='product.images.length > 0')
            .product-summary
                h1.title {{product.storeProductTitle}}
                h2.price(v-if='accountingParse(this.product.storeProductPrice, ",") > 0')
                    sup R$
                    | {{ product.storeProductPrice | currency | currencyInt }}
                    sup {{ product.storeProductPrice | currency | currencyCents }} 
                    //- | R$ {{ product.storeProductPrice | currency}}
                ul.detail(v-if='productDetail.length > 0')
                    li(v-for='detail in productDetail') {{detail}}
                h2(v-if='product.storeProductQtd < 1').out-of-stock Produto fora de estoque
                input.add-to-cart.btn-primary(v-if='product.storeProductQtd > 0' type='button' @click='addToCart' value='Adicionar ao carrinho')
                .estimate-ship(v-if='product.storeProductQtd > 0')
                    p Estimar frete e prazo (Entre com o CEP)
                        .join-buttons
                            input(type='text' id='cep' v-model='cepDestiny')
                            input.btn-info(type='button' @click='estimateShipment' value='Calcular')
                            span.loader(v-show='loadingEstimateShipment')
                    p.errMsg {{cepErrMsg}}
                    table(v-if='showEstimatedShipment')
                        thead
                            tr
                                th Entrega
                                th Frete
                                th Prazo
                        tbody
                            tr(v-for='estShip in estimateShipmentData')
                                td {{estShip.service}}
                                td R$ {{estShip.price}}
                                td {{estShip.time}}
            .product-description(v-if='product.storeProductDescription.trim() !== ""')
                h1.title Descrição do produto
                p(v-for='prodDescItem in productDescription') 
                    | {{ prodDescItem }}
                    br
            .product-technical(v-if='productInformationTechnical.length > 0')
                h1.title Detalhe técnico
                div(v-for='infoTech in productInformationTechnical')
                    h2.sub-title {{infoTech[0]}}
                    p {{infoTech[1]}}
            .product-additional(v-if='productInformationAdditional.length > 0')
                h1.title Informações adicionais
                div(v-for='infoAdd in productInformationAdditional')
                    h2.sub-title {{infoAdd[0]}}
                    p {{infoAdd[1]}}
        .modal(v-if='showModal')
            .panel
                i.close.far.fa-window-close(@click='hideZoomImg')
                .zoom-image
                    img(:src='srcImgZoom(product, selectedThumbnail)' v-if='product.images.length > 0')

append internal_scripts
    script.
        let product = !{JSON.stringify(product)};
        //- let cart = !{JSON.stringify(cart)};
        //- let search = !{JSON.stringify(search)};
        //- let banners = !{JSON.stringify(banners)};

append external_scripts
    include ../components/accounting.js.pug
    script(src='/js/product/product.js?0002')
