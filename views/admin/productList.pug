doctype html
html(lang="en")
  head
    meta(charset='utf-8')
    meta(name="viewport" content="width=device-width, initial-scale=1")
    //- link(rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Lato")
    title Zunka - Produtos
    link(rel="stylesheet" href="/css/admin/productList.css" charset="utf-8")
  body
    header
      nav
        include ../main-nav.pug
    main
      #app(v-cloak)
        table
          thead
            tr
              th Código
              th Título
              th Fornecedor
              th Local
              th Estoque
              th Preço
          tbody
            tr(
              v-for='product in products', 
              :class='{"product-commercialize": product.storeProductCommercialize, "product-active": product.dealerProductActive && (product.dealerProductQtd > 5)}'
            )
              td: a(:href='`/admin/product/${product._id}`') {{product.storeProductId}}
              td: a(:href='`/admin/product/${product._id}`') {{product.storeProductTitle}}
              td: a(:href='`/admin/product/${product._id}`') {{product.dealerName}}
              td: a(:href='`/admin/product/${product._id}`') {{product.dealerProductLocation}}
              td: a(:href='`/admin/product/${product._id}`') {{product.dealerProductQtd}}
              td: a(:href='`/admin/product/${product._id}`') {{product.storeProductPrice | formatMoney}}   
        nav.pagination
          a(v-for='p in pageCount', @click='getProducts(p)', :page='page==p', :p='p', :active='page==p') {{p}}
          //- a(v-for='p in pageCount', :href='`/admin?page=${p}&search=${search}`', :page='page==p', :p='p', :active='page==p') {{p}}
    script.
      // Make available for vue.
      let csrfToken = !{JSON.stringify(csrfToken)};
      //- let user = !{JSON.stringify(user)};
      let search = !{JSON.stringify(search)};
      let page = !{JSON.stringify(page)};   //  Selected page.
      //- let pageCount = !{JSON.stringify(pageCount)}; //  Number of pages.    
      //- let productAdded = !{JSON.stringify(productAdded)};   // Message for product added on cart.
      //- console.log(`products lenght: ${products.lenght}`);
    include ../components/axios.js.pug
    include ../components/vue.js.pug
    script(src='/js/admin/productList.js')
